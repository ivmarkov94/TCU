void pid_init(pid_reg_t *pid)
{
  memset(pid, 0, sizeof(pid_reg_t));

  pid->ref = 900;

  pid->p.gain = 20;
  pid->p.period_ms = 100;

  pid->d.gain = 20;
  pid->d.period_ms = 1000;
  pid->d.start_cond = 10;/* delta between ref and current temperature [C] */

  pid->i.gain = 0.5; 
  pid->i.period_ms = 3000;
  pid->i.saturation = MAX_TIM_DUTY/2;
  pid->i.start_cond = 10;/* delta between ref and current temperature [C] */
}

ref= 90 act=100.15 D=2000, e=101 p=2000 d=   0 i=   0
ref= 90 act=100.15 D=2000, e=101 p=2000 d=   0 i=   0
ref= 90 act=100.15 D=2000, e=101 p=2000 d=   0 i=   0
ref= 90 act=100.15 D=2000, e=101 p=2000 d=   0 i=   0
ref= 90 act=100.20 D=2000, e=102 p=2000 d=   0 i=   0
ref= 90 act=100.20 D=2000, e=102 p=2000 d=   0 i=   0
ref= 90 act=100.20 D=2000, e=102 p=2000 d=   0 i=   0
ref= 90 act=100.20 D=2000, e=102 p=2000 d=   0 i=   0
ref= 90 act=100.20 D=2000, e=102 p=2000 d=   0 i=   0
ref= 90 act=100.20 D=2000, e=102 p=2000 d=   0 i=   0
ref= 90 act=100.10 D=2000, e=101 p=2000 d=   0 i=   0
ref= 90 act=99.82 D=1929, e= 98 p=1960 d= -80 i=  49
ref= 90 act=99.19 D=1689, e= 91 p=1860 d=-220 i=  49
ref= 90 act=98.16 D=1249, e= 81 p=1620 d=-420 i=  49
ref= 90 act=96.49 D= 601, e= 64 p=1280 d=-760 i=  81
ref= 90 act=94.26 D=   0, e= 42 p= 920 d=-1200 i=  81
ref= 90 act=91.66 D=   0, e= 16 p= 320 d=-1700 i=  81
ref= 90 act=89.08 D=   0, e=-10 p=-140 d=-2000 i=  76
ref= 90 act=87.44 D=   0, e=-26 p=-480 d=-2000 i=  76
ref= 90 act=86.52 D=   0, e=-35 p=-700 d=-2000 i=  76
ref= 90 act=86.20 D=   0, e=-38 p=-760 d=-2000 i=  57
ref= 90 act=86.44 D=   0, e=-36 p=-720 d=-1560 i=  57
ref= 90 act=86.92 D=   0, e=-31 p=-620 d=-940 i=  57
ref= 90 act=87.56 D=   0, e=-25 p=-500 d=-300 i=  44
ref= 90 act=88.12 D=   0, e=-19 p=-400 d= 140 i=  44
ref= 90 act=88.52 D= 144, e=-15 p=-300 d= 400 i=  44
ref= 90 act=88.92 D= 359, e=-11 p=-220 d= 540 i=  39
ref= 90 act=89.16 D= 399, e= -9 p=-180 d= 540 i=  39
ref= 90 act=89.36 D= 379, e= -7 p=-140 d= 480 i=  39
ref= 90 act=89.56 D= 336, e= -5 p=-100 d= 400 i=  36
ref= 90 act=89.68 D= 256, e= -4 p= -80 d= 300 i=  36
ref= 90 act=89.84 D= 256, e= -2 p= -40 d= 260 i=  36
ref= 90 act=90.00 D= 256, e=  0 p=   0 d= 220 i=  36
ref= 90 act=90.29 D= 296, e=  2 p=  40 d= 220 i=  36
ref= 90 act=90.54 D= 356, e=  5 p=  80 d= 240 i=  36
ref= 90 act=90.73 D= 420, e=  7 p= 140 d= 240 i=  40
ref= 90 act=90.97 D= 480, e=  9 p= 180 d= 260 i=  40
ref= 90 act=91.22 D= 560, e= 12 p= 240 d= 280 i=  40
ref= 90 act=91.41 D= 607, e= 14 p= 280 d= 280 i=  47
ref= 90 act=91.66 D= 647, e= 16 p= 320 d= 280 i=  47
ref= 90 act=91.84 D= 667, e= 18 p= 360 d= 260 i=  47
ref= 90 act=92.03 D= 717, e= 20 p= 400 d= 260 i=  57
ref= 90 act=92.21 D= 757, e= 22 p= 440 d= 260 i=  57
ref= 90 act=92.40 D= 757, e= 24 p= 460 d= 240 i=  57
ref= 90 act=92.59 D= 789, e= 25 p= 500 d= 220 i=  69
ref= 90 act=92.71 D= 829, e= 27 p= 540 d= 220 i=  69
ref= 90 act=92.90 D= 869, e= 29 p= 580 d= 220 i=  69
ref= 90 act=93.02 D= 884, e= 30 p= 600 d= 200 i=  84
ref= 90 act=93.14 D= 884, e= 31 p= 620 d= 180 i=  84
ref= 90 act=93.33 D= 924, e= 33 p= 660 d= 180 i=  84
ref= 90 act=93.39 D= 921, e= 33 p= 660 d= 160 i= 101
ref= 90 act=93.58 D= 961, e= 35 p= 700 d= 160 i= 101
ref= 90 act=93.70 D=1001, e= 37 p= 740 d= 160 i= 101
ref= 90 act=93.83 D=1040, e= 38 p= 760 d= 160 i= 120
ref= 90 act=93.95 D=1060, e= 39 p= 780 d= 160 i= 120
ref= 90 act=94.07 D=1060, e= 40 p= 800 d= 140 i= 120
ref= 90 act=94.20 D=1161, e= 42 p= 840 d= 180 i= 141
ref= 90 act=94.32 D=1161, e= 43 p= 860 d= 160 i= 141
ref= 90 act=94.38 D=1121, e= 43 p= 860 d= 120 i= 141
ref= 90 act=94.45 D=1163, e= 44 p= 880 d= 120 i= 163
ref= 90 act=94.38 D=1103, e= 43 p= 860 d=  80 i= 163
ref= 90 act=94.26 D=1043, e= 42 p= 840 d=  40 i= 163
ref= 90 act=94.07 D= 943, e= 40 p= 800 d= -40 i= 183
ref= 90 act=93.70 D= 803, e= 37 p= 740 d=-120 i= 183
ref= 90 act=93.27 D= 623, e= 32 p= 660 d=-220 i= 183
ref= 90 act=92.77 D= 396, e= 27 p= 540 d=-340 i= 196
ref= 90 act=92.21 D= 216, e= 22 p= 440 d=-420 i= 196
ref= 90 act=91.66 D=  16, e= 16 p= 340 d=-520 i= 196
ref= 90 act=91.16 D=   0, e= 11 p= 220 d=-580 i= 202
ref= 90 act=90.60 D=   0, e=  6 p= 120 d=-620 i= 202
ref= 90 act=90.00 D=   0, e=  0 p=   0 d=-640 i= 202
ref= 90 act=89.68 D=   0, e= -4 p= -80 d=-620 i= 200
ref= 90 act=89.32 D=   0, e= -7 p=-140 d=-580 i= 200
ref= 90 act=89.04 D=   0, e=-10 p=-200 d=-520 i= 200
ref= 90 act=88.88 D=   0, e=-12 p=-240 d=-460 i= 194
ref= 90 act=88.88 D=   0, e=-12 p=-240 d=-360 i= 194
ref= 90 act=89.08 D=   0, e=-10 p=-200 d=-200 i= 194
ref= 90 act=89.28 D=   0, e= -8 p=-160 d= -80 i= 190
ref= 90 act=89.52 D= 130, e= -5 p=-100 d=  40 i= 190
ref= 90 act=89.80 D= 310, e= -2 p= -40 d= 160 i= 190
ref= 90 act=89.96 D= 389, e= -1 p= -20 d= 220 i= 189
ref= 90 act=90.29 D= 509, e=  2 p=  40 d= 280 i= 189
ref= 90 act=90.54 D= 589, e=  5 p= 100 d= 300 i= 189
ref= 90 act=90.73 D= 633, e=  7 p= 140 d= 300 i= 193
ref= 90 act=90.91 D= 653, e=  9 p= 180 d= 280 i= 193
ref= 90 act=91.10 D= 673, e= 11 p= 220 d= 260 i= 193
ref= 90 act=91.28 D= 699, e= 12 p= 240 d= 260 i= 199
ref= 90 act=91.41 D= 719, e= 14 p= 280 d= 240 i= 199
ref= 90 act=91.53 D= 699, e= 15 p= 300 d= 200 i= 199
ref= 90 act=91.72 D= 747, e= 17 p= 340 d= 200 i= 207
ref= 90 act=91.90 D= 787, e= 19 p= 380 d= 200 i= 207
ref= 90 act=92.03 D= 787, e= 20 p= 400 d= 180 i= 207
ref= 90 act=92.21 D= 858, e= 22 p= 440 d= 200 i= 218
ref= 90 act=92.34 D= 858, e= 23 p= 460 d= 180 i= 218
ref= 90 act=92.46 D= 878, e= 24 p= 480 d= 180 i= 218
ref= 90 act=92.65 D= 911, e= 26 p= 500 d= 180 i= 231
ref= 90 act=92.77 D= 931, e= 27 p= 540 d= 160 i= 231
ref= 90 act=92.90 D= 991, e= 29 p= 580 d= 180 i= 231
ref= 90 act=93.02 D=1006, e= 30 p= 600 d= 160 i= 246
ref= 90 act=93.14 D=1026, e= 31 p= 620 d= 160 i= 246
ref= 90 act=93.27 D=1046, e= 32 p= 640 d= 160 i= 246
ref= 90 act=93.39 D=1063, e= 33 p= 660 d= 140 i= 263
ref= 90 act=93.52 D=1123, e= 35 p= 700 d= 160 i= 263
ref= 90 act=93.58 D=1083, e= 35 p= 700 d= 120 i= 263
ref= 90 act=93.64 D=1121, e= 36 p= 720 d= 120 i= 281
ref= 90 act=93.64 D=1101, e= 36 p= 720 d= 100 i= 281
ref= 90 act=93.52 D=1041, e= 35 p= 700 d=  60 i= 281
ref= 90 act=93.27 D= 937, e= 32 p= 660 d= -20 i= 297
ref= 90 act=92.96 D= 757, e= 29 p= 580 d=-120 i= 297
ref= 90 act=92.59 D= 597, e= 25 p= 500 d=-200 i= 297
ref= 90 act=92.09 D= 387, e= 20 p= 400 d=-320 i= 307
ref= 90 act=91.59 D= 187, e= 15 p= 300 d=-420 i= 307
ref= 90 act=91.04 D=   7, e= 10 p= 200 d=-500 i= 307
ref= 90 act=90.54 D=   0, e=  5 p= 120 d=-540 i= 309
ref= 90 act=90.17 D=   0, e=  1 p=  20 d=-560 i= 309
ref= 90 act=89.80 D=   0, e= -2 p= -40 d=-540 i= 309
ref= 90 act=89.56 D=   0, e= -5 p= -80 d=-500 i= 307
ref= 90 act=89.36 D=   0, e= -7 p=-140 d=-440 i= 307
ref= 90 act=89.16 D=   0, e= -9 p=-180 d=-380 i= 307
ref= 90 act=89.08 D=   0, e=-10 p=-200 d=-300 i= 302
ref= 90 act=89.12 D=   0, e= -9 p=-180 d=-200 i= 302
ref= 90 act=89.28 D=  22, e= -8 p=-160 d=-120 i= 302
ref= 90 act=89.48 D= 159, e= -6 p=-120 d= -20 i= 299
ref= 90 act=89.68 D= 279, e= -4 p= -80 d=  60 i= 299
ref= 90 act=89.84 D= 399, e= -2 p= -40 d= 140 i= 299
ref= 90 act=90.11 D= 539, e=  1 p=  20 d= 220 i= 299
ref= 90 act=90.35 D= 599, e=  3 p=  60 d= 240 i= 299
ref= 90 act=90.54 D= 659, e=  5 p= 100 d= 260 i= 299
ref= 90 act=90.73 D= 703, e=  7 p= 140 d= 260 i= 303
ref= 90 act=90.91 D= 743, e=  9 p= 180 d= 260 i= 303
ref= 90 act=91.04 D= 743, e= 10 p= 200 d= 240 i= 303
ref= 90 act=91.22 D= 769, e= 12 p= 240 d= 220 i= 309
ref= 90 act=91.35 D= 769, e= 13 p= 260 d= 200 i= 309
ref= 90 act=91.53 D= 809, e= 15 p= 300 d= 200 i= 309
ref= 90 act=91.66 D= 817, e= 16 p= 320 d= 180 i= 317
ref= 90 act=91.84 D= 837, e= 18 p= 340 d= 180 i= 317
ref= 90 act=91.97 D= 877, e= 19 p= 380 d= 180 i= 317
ref= 90 act=92.09 D= 887, e= 20 p= 400 d= 160 i= 327
ref= 90 act=92.21 D= 947, e= 22 p= 440 d= 180 i= 327
ref= 90 act=92.34 D= 947, e= 23 p= 460 d= 160 i= 327
ref= 90 act=92.46 D= 979, e= 24 p= 480 d= 160 i= 339
ref= 90 act=92.59 D= 979, e= 25 p= 500 d= 140 i= 339
ref= 90 act=92.71 D=1039, e= 27 p= 540 d= 160 i= 339
ref= 90 act=92.83 D=1073, e= 28 p= 560 d= 160 i= 353
ref= 90 act=92.90 D=1073, e= 29 p= 580 d= 140 i= 353
ref= 90 act=93.02 D=1093, e= 30 p= 600 d= 140 i= 353
ref= 90 act=93.08 D=1088, e= 30 p= 600 d= 120 i= 368
ref= 90 act=93.14 D=1108, e= 31 p= 620 d= 120 i= 368
ref= 90 act=93.08 D=1028, e= 30 p= 600 d=  60 i= 368
ref= 90 act=92.90 D= 982, e= 29 p= 580 d=  20 i= 382
ref= 90 act=92.65 D= 842, e= 26 p= 520 d= -60 i= 382
ref= 90 act=92.40 D= 742, e= 24 p= 480 d=-120 i= 382
ref= 90 act=91.97 D= 552, e= 19 p= 380 d=-220 i= 392
ref= 90 act=91.53 D= 372, e= 15 p= 300 d=-320 i= 392
ref= 90 act=91.10 D= 232, e= 11 p= 220 d=-380 i= 392
ref= 90 act=90.60 D=  55, e=  6 p= 120 d=-460 i= 395
ref= 90 act=90.17 D=   0, e=  1 p=  40 d=-500 i= 395
ref= 90 act=89.84 D=   0, e= -2 p= -40 d=-520 i= 395
ref= 90 act=89.64 D=   0, e= -4 p= -80 d=-460 i= 393
ref= 90 act=89.40 D=   0, e= -6 p=-120 d=-420 i= 393
ref= 90 act=89.24 D=   0, e= -8 p=-160 d=-380 i= 393
ref= 90 act=89.08 D=   0, e=-10 p=-200 d=-320 i= 388
ref= 90 act=89.04 D=   0, e=-10 p=-200 d=-220 i= 388
ref= 90 act=89.08 D=  28, e=-10 p=-200 d=-160 i= 388
ref= 90 act=89.28 D= 144, e= -8 p=-160 d= -80 i= 384
ref= 90 act=89.48 D= 264, e= -6 p=-120 d=   0 i= 384
ref= 90 act=89.64 D= 384, e= -4 p= -80 d=  80 i= 384
ref= 90 act=89.84 D= 503, e= -2 p= -40 d= 160 i= 383
ref= 90 act=90.00 D= 583, e=  0 p=   0 d= 200 i= 383
ref= 90 act=90.23 D= 663, e=  2 p=  40 d= 240 i= 383
ref= 90 act=90.42 D= 705, e=  4 p=  80 d= 240 i= 385
ref= 90 act=90.60 D= 745, e=  6 p= 120 d= 240 i= 385
ref= 90 act=90.73 D= 745, e=  7 p= 140 d= 220 i= 385
ref= 90 act=90.91 D= 789, e=  9 p= 180 d= 220 i= 389
ref= 90 act=91.04 D= 789, e= 10 p= 200 d= 200 i= 389
ref= 90 act=91.16 D= 789, e= 11 p= 220 d= 180 i= 389
ref= 90 act=91.35 D= 836, e= 13 p= 260 d= 180 i= 396
ref= 90 act=91.47 D= 836, e= 14 p= 280 d= 160 i= 396
ref= 90 act=91.59 D= 856, e= 15 p= 300 d= 160 i= 396
ref= 90 act=91.72 D= 904, e= 17 p= 340 d= 160 i= 404
ref= 90 act=91.84 D= 924, e= 18 p= 360 d= 160 i= 404
ref= 90 act=91.97 D= 944, e= 19 p= 380 d= 160 i= 404
ref= 90 act=92.09 D= 954, e= 20 p= 400 d= 140 i= 414
ref= 90 act=92.21 D=1014, e= 22 p= 440 d= 160 i= 414
ref= 90 act=92.34 D=1034, e= 23 p= 460 d= 160 i= 414
ref= 90 act=92.46 D=1046, e= 24 p= 480 d= 140 i= 426
ref= 90 act=92.59 D=1066, e= 25 p= 500 d= 140 i= 426
ref= 90 act=92.71 D=1106, e= 27 p= 520 d= 160 i= 426
ref= 90 act=92.71 D=1120, e= 27 p= 540 d= 140 i= 440
ref= 90 act=92.77 D=1080, e= 27 p= 540 d= 100 i= 440
ref= 90 act=92.71 D=1060, e= 27 p= 540 d=  80 i= 440
ref= 90 act=92.59 D= 972, e= 25 p= 500 d=  20 i= 452
ref= 90 act=92.40 D= 912, e= 24 p= 480 d= -20 i= 452
ref= 90 act=92.09 D= 732, e= 20 p= 420 d=-140 i= 452
ref= 90 act=91.78 D= 601, e= 17 p= 340 d=-200 i= 461
ref= 90 act=91.28 D= 421, e= 12 p= 260 d=-300 i= 461
ref= 90 act=90.85 D= 261, e=  8 p= 180 d=-380 i= 461
ref= 90 act=90.42 D= 123, e=  4 p=  80 d=-420 i= 463
ref= 90 act=90.00 D=   3, e=  0 p=  20 d=-480 i= 463
ref= 90 act=89.76 D=   0, e= -3 p= -60 d=-460 i= 463
ref= 90 act=89.56 D=   0, e= -5 p=-100 d=-440 i= 460
ref= 90 act=89.36 D=   0, e= -7 p=-140 d=-380 i= 460
ref= 90 act=89.16 D=   0, e= -9 p=-180 d=-340 i= 460
ref= 90 act=89.04 D=   0, e=-10 p=-200 d=-280 i= 455
ref= 90 act=88.96 D=  15, e=-11 p=-220 d=-220 i= 455
ref= 90 act=89.00 D= 115, e=-10 p=-200 d=-140 i= 455
ref= 90 act=89.12 D= 191, e= -9 p=-180 d= -80 i= 451
ref= 90 act=89.32 D= 311, e= -7 p=-140 d=   0 i= 451
ref= 90 act=89.52 D= 431, e= -5 p=-100 d=  80 i= 451
ref= 90 act=89.68 D= 489, e= -4 p= -80 d= 120 i= 449
ref= 90 act=89.84 D= 589, e= -2 p= -40 d= 180 i= 449
ref= 90 act=90.00 D= 649, e=  0 p=   0 d= 200 i= 449
ref= 90 act=90.23 D= 710, e=  2 p=  40 d= 220 i= 450
ref= 90 act=90.35 D= 710, e=  3 p=  60 d= 200 i= 450


Send Log : 

ASCII:dbg_base
ASCII:dbg_base
ASCII:dbg_adc1
ASCII:dbg_base
ASCII:dbg_adc2
ASCII:dbg_base
ASCII:c_cust
